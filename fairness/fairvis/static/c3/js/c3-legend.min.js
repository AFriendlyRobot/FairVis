(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},i={}.hasOwnProperty,t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};c3.Legend=function(i){function r(){return this._style=n(this._style,this),this._update=n(this._update,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.1,r.prototype.type="legend",r.prototype.data=[],r.prototype.key=void 0,r.prototype.filter=void 0,r.prototype.nest=void 0,r.prototype.nest_key=void 0,r.prototype.hoverable=!0,r.prototype.list_options=void 0,r.prototype.item_options=void 0,r.prototype.nested_item_options=void 0,r.prototype.bullet_options=void 0,r.prototype.nested_bullet_options=void 0,r.prototype._init=function(){var n,t;return this.nest==null&&(this.nest=function(n){return Array.isArray(n)?n:[]}),this.filter==null&&(this.filter=function(n){return function(t){var i,r,u,f,e;return(u=(f=(e=typeof(i=n.item_options).html=="function"?i.html(t):void 0)!=null?e:n.item_options.html)!=null?f:typeof(r=n.item_options).text=="function"?r.text(t):void 0)!=null?u:n.item_options.text}}(this)),this.item_options==null&&(this.item_options={}),(n=this.item_options).text==null&&(n.text=function(n){return Array.isArray(n)?""+n.length+" items":n}),this.nested_item_options==null&&(this.nested_item_options=this.item_options),this.bullet_options==null&&(this.bullet_options={}),(t=this.bullet_options).text==null&&(t.text="•"),this.nested_bullet_options==null&&(this.nested_bullet_options=this.bullet_options),this.list=c3.select(d3.select(this.anchor),"ul").singleton()},r.prototype._update=function(){var r,n,t,i,u,f;return this.current_data=this.filter?function(){var t,f,i,u;for(i=this.data,u=[],n=t=0,f=i.length;t<f;n=++t)r=i[n],this.filter(r,n)&&u.push(r);return u}.call(this):this.data,t={text:this.item_options.text,html:this.item_options.html},i={text:this.nested_item_options.text,html:this.nested_item_options.html},delete this.item_options.html,delete this.item_options.text,delete this.nested_item_options.html,delete this.nested_item_options.text,(u=this.list_options)!=null&&delete u.html,(f=this.list_options)!=null&&delete f.text,this.list.options(this.list_options).update(),this.items=this.list.select("ul:not(.child) > li").bind(this.current_data,this.key),this.items.options(this.item_options).update(),this.items.inherit("span.content").options(t).update(),this.bullet_options&&(this.bullets=this.items.inherit("ul:not(.child) > li > span.bullet",!0,!0),this.bullets.options(this.bullet_options).update()),this.nest&&(this.nested_items=this.items.inherit("ul.child").select("li").bind(this.nest,this.nest_key),this.nested_items.options(this.nested_item_options).update(),this.nested_items.inherit("span.content").options(i).update(),this.nested_bullet_options&&(this.nested_bullets=this.nested_items.inherit("span.bullet",!0,!0),this.nested_bullets.options(this.nested_bullet_options).update())),this.item_options.text=t.text,this.item_options.html=t.html,this.nested_item_options.text=i.text,this.nested_item_options.html=i.html,this.items.select("ul > li").all.each(function(){return d3.select(this).node().parentNode.parentNode.classList.add("parent")})},r.prototype._style=function(n){var t,i,r;return this.list.style().all.classed({c3:!0,legend:!0,hoverable:this.hoverable}),this.items.style(n),(t=this.nested_items)!=null&&t.style(n),(i=this.bullets)!=null&&i.style(n),(r=this.nested_bullets)!=null?r.style(n):void 0},r}(c3.Base);c3.Legend.PlotLegend=function(i){function r(){return this._style=n(this._style,this),this._update=n(this._update,this),this._init=n(this._init,this),r.__super__.constructor.apply(this,arguments)}return t(r,i),r.version=.1,r.prototype.type="plot_legend",r.prototype.plot=void 0,r.prototype.html_names=!1,r.prototype.hover_fade=.2,r.prototype.duration=750,r.prototype._init=function(){var n,t,i,u,f,e,o,s,h,c,l,a,v,y,p,w;if(this.plot==null)throw Error("Plot legend must have a plot option refering to a c3.Plot.");if(!(this.plot instanceof c3.Plot))throw Error("Plot option must reference a c3.Plot type object.");if(!this.plot.rendered)throw Error("plot_legend's linked plot should be rendered before rendering the legend.");this.data=this.plot.layers;this.key==null&&(this.key=function(n){return n.uid});this.nest==null&&(this.nest=function(n){var t;return(t=n.stacks)!=null?t:[]});this.item_options==null&&(this.item_options={});this.nested_item_options==null&&(this.nested_item_options={});t=function(n){return function(t,i){var u,f,e,o,r,s;return(u=(f=(e=(o=t.options)!=null?o.title:void 0)!=null?e:(r=n.plot.layer_options)!=null?typeof r.title=="function"?r.title(t,i):void 0:void 0)!=null?f:(s=n.plot.layer_options)!=null?s.title:void 0)!=null?u:t.name}}(this);n=function(n,i){var r,u;return(r=(u=n.name)!=null?u:t(n,i))!=null?r:n.type};u=function(n,t,i){var u,f,e,o,r,s;return(u=(f=(e=(o=n.options)!=null?o.title:void 0)!=null?e:i!=null?(r=i.stack_options)!=null?typeof r.title=="function"?r.title(n):void 0:void 0:void 0)!=null?f:i!=null?(s=i.stack_options)!=null?s.title:void 0:void 0)!=null?u:n.name};i=function(n,t,i){var r,f;return(r=(f=n.name)!=null?f:u(n,t,i))!=null?r:"stack"};this.html_names?((f=this.item_options).html==null&&(f.html=n),(e=this.nested_item_options).html==null&&(e.html=i)):((h=this.item_options).text==null&&(h.text=n),(c=this.nested_item_options).text==null&&(c.text=i));(l=this.item_options).title==null&&(l.title=t);(a=this.nested_item_options).title==null&&(a.title=u);this.hoverable&&((v=this.item_options).events==null&&(v.events={}),(y=this.item_options.events).mouseenter==null&&(y.mouseenter=function(n){return function(t,i){var r;return r=n.hover_fade,n.plot.layers_selection.all.style("opacity",function(n){var i,u;return i=(u=d3.select(this).style("opacity"))!=null?u:1,n!==t?r*i:i}),n.trigger("layer_mouseenter",t,i)}}(this)),(p=this.item_options.events).mouseleave==null&&(p.mouseleave=function(n){return function(t,i){return n.plot.layers_selection.all.style("opacity",function(n,t){var u,f,e,o,s,i,h,c,r,l;return(u=(f=(e=(o=(s=n.options)!=null?(i=s.styles)!=null?typeof i.opacity=="function"?i.opacity(n,t):void 0:void 0:void 0)!=null?o:(h=n.options)!=null?(c=h.styles)!=null?c.opacity:void 0:void 0)!=null?e:(r=n.styles)!=null?typeof r.opacity=="function"?r.opacity(n,t):void 0:void 0)!=null?f:(l=n.styles)!=null?l.opacity:void 0)!=null?u:1}),n.trigger("layer_mouseleave",t,i)}}(this)),(w=this.nested_item_options).events==null&&(w.events={}),(o=this.nested_item_options.events).mouseenter==null&&(o.mouseenter=function(n){return function(t,i,r){var f,e,u,o,s;return u=n.plot.layers[r],e=n.hover_fade,u.groups.all.style("opacity",function(n){var i,r;return i=(r=d3.select(this).style("opacity"))!=null?r:1,n!==t?e*i:i}),f=n.duration,(o=u.rects)!=null&&o.all.filter(function(n,t,r){return r===i}).transition().duration(f).attr("transform",function(){var n;return n=d3.select(this),"translate(0,"+(u.v.range()[0]-n.attr("y")-n.attr("height"))+")"}),u.path_generator!=null&&(s=u.paths)!=null&&s.all.filter(function(n,t){return t===i}).transition().duration(f).attr("d",function(n){return u.path_generator.x(function(t,i){var r;return((r=u.chart.orig_h)!=null?r:u.h)(n.values[i].x)}).y(function(t,i){return u.v(n.values[i].y)}).y0(u.v.range()[0]),u.path_generator(n.current_data)}),n.trigger("stack_mouseenter",t,i,r)}}(this)),(s=this.nested_item_options.events).mouseleave==null&&(s.mouseleave=function(n){return function(t,i,r){var u,f,e;return u=n.plot.layers[r],u.groups.all.style("opacity",function(n,t){var r,f,e,i,o,s;return(r=(f=(e=u.stack_options)!=null?(i=e.styles)!=null?typeof i.opacity=="function"?i.opacity(n,t):void 0:void 0:void 0)!=null?f:(o=u.stack_options)!=null?(s=o.styles)!=null?s.opacity:void 0:void 0)!=null?r:1}),(f=u.rects)!=null&&f.all.transition().duration(n.duration).attr("transform",""),(e=u.paths)!=null&&e.all.interrupt(),u.draw(),n.trigger("stack_mouseleave",t,i,r)}}(this)));r.__super__._init.apply(this,arguments);this.list.all.classed("plot_legend",!0);return this.plot.on("restyle.legend",this.restyle)},r.prototype._update=function(){var t,i,n;return delete this.bullet_options.text,delete this.bullet_options.html,r.__super__._update.apply(this,arguments),n=16,t=function(t,i,r){var u,f,e,o,s,h,c;return r==null&&(r=0),i instanceof c3.Layer.Line?(u=i.paths.all[0][r],t.select("line").singleton(u).position({x1:0,y1:n/2,x2:n,y2:n/2})):i instanceof c3.Layer.Line.Horizontal?(u=i.lines.all.node(),t.select("line").singleton(u).position({x1:0,y1:n/2,x2:n,y2:n/2})):i instanceof c3.Layer.Line.Vertical?(u=i.lines.all.node(),t.select("line").singleton(u).position({x1:n/2,y1:0,x2:n/2,y2:n})):i instanceof c3.Layer.Scatter?(u=i.circles.all.node(),t.select("circle").singleton(u).position({cx:n/2,cy:n/2,r:n/4})):(u=(f=(e=(o=(s=i.paths)!=null?s.all[0][r]:void 0)!=null?o:(h=i.rects)!=null?h.all[r][0]:void 0)!=null?e:(c=i.groups)!=null?c.all.node():void 0)!=null?f:i.g.node(),t.select("rect").singleton(u).position({x:n*.1,y:n*.1,height:n*.8,width:n*.8,rx:n/5,ry:n/5}))},this.bullets_svg=this.bullets.inherit("svg"),this.bullets_svg.all.attr({height:n,width:n}),this.bullets_svg.all.each(function(n){return n.stacks==null?t(c3.select(d3.select(this)),n):d3.select(this.parentNode).remove()}),this.nested_bullets_svg=this.nested_bullets.inherit("svg"),this.nested_bullets_svg.all.attr({height:n,width:n}),i=this.plot,this.nested_bullets_svg.all.each(function(n,r,u){var f;return f=i.layers[u],t(c3.select(d3.select(this)),f,r)})},r.prototype._style=function(){return r.__super__._style.apply(this,arguments),this.list.all.selectAll("li > .bullet > svg > *").each(function(n){var f,e,i,t,o,r,u;if(n){for(f=d3.select(this),e=getComputedStyle(n),r=["stroke","stroke-dasharray","stroke-width","fill","opacity"],u=[],t=0,o=r.length;t<o;t++)i=r[t],u.push(f.style(i,e.getPropertyValue(i)));return u}})},r}(c3.Legend)}).call(this);